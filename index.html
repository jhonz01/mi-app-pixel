<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pa' ti mi cachetona üíñ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #222;
      font-family: 'Press Start 2P', Arial, sans-serif;
      text-align: center;
      height: 100%;
      width: 100vw;
    }
    h1 {
      margin: 10px 0 0 0;
      font-size: 5vw;
      color: #fff;
      text-shadow: 2px 2px 0 #000;
      letter-spacing: 2px;
    }
    #mensaje {
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 10px 18px;
      border-radius: 12px;
      display: none;
      margin: 12px auto 8px auto;
      font-size: 4vw;
      box-shadow: 0 2px 8px #0006;
      min-width: 60vw;
      max-width: 90vw;
      position: absolute;
      left: 50%;
      top: 20%;
      transform: translateX(-50%);
      z-index: 2;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: #222;
      width: 100vw;
      max-width: 100vw;
      height: 60vw;
      max-height: 70vw;
      image-rendering: pixelated;
      border: 2px solid #333;
      position: relative;
      z-index: 1;
    }
    .controles {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
      width: 95vw;
      justify-content: center;
      flex-wrap: wrap;
    }
    .controles button {
      background: #ff66a3;
      border: 2px solid #fff;
      padding: 12px;
      border-radius: 10px;
      font-size: 7vw;
      box-shadow: 2px 2px 5px #0004;
      color: #fff;
      font-family: inherit;
      min-width: 60px;
      min-height: 60px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .controles button:active {
      background: #ff3380;
    }
    @media (max-width: 600px) {
      h1 { font-size: 7vw; }
      #mensaje { font-size: 5vw; }
      #gameCanvas { height: 60vw; }
    }
  </style>
</head>
<body>
  <h1>üéÆ Pa' ti mi cachetona üíñ</h1>
  <div id="mensaje">Pa‚Äô ti mi cachetona hermosa üåπ</div>
  <canvas id="gameCanvas" width="320" height="160"></canvas>
  <div class="controles">
    <button id="btnMensaje" title="Nuevo mensajito">üíå</button>
  </div>
  <script>
    // --- CONFIGURACI√ìN ---
    const mensajes = [
      "Pa‚Äô ti mi cachetona hermosa üåπ",
      "Te extra√±o mucho üíñ",
      "Eres mi persona favorita üòò",
      "Siempre pienso en ti ü•∞",
      "¬°Sonr√≠e, mi amor! üòä",
      "T√∫ eres mi cielo üåà",
      "¬°Te amo infinito! üíû",
      "Eres mi pixel preferido üü™",
      "Quiero abrazarte ya ü´Ç",
      "¬°Eres mi raz√≥n de sonre√≠r! üòç"
    ];

    // --- CANVAS ---
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    ctx.imageSmoothingEnabled = false;

    // --- SPRITES (PERSONAJES) ---
    const sprites = {
      ella: new Image(),
      yo: new Image()
    };
    sprites.ella.src = "sprites/ella.png";
    sprites.yo.src = "sprites/yo.png";

    // --- PERSONAJES ---
    let personajeElla = {
      x: 10,
      y: 100,
      width: 32,
      height: 32,
      destino: 120,
      speed: 2,
      caminando: false
    };
    let personajeYo = {
      x: 278,
      y: 100,
      width: 32,
      height: 32,
      destino: 160,
      speed: 2,
      caminando: false
    };

    // --- ANIMACI√ìN DEL BESO ---
    let animacion = "idle"; // idle, caminando, beso, corazon, mensaje
    let corazonGrande = false;
    let corazonAlpha = 0;
    let mensajeMostrado = false;
    let mensajeActual = mensajes[0];

    // --- PAISAJE SIMPLE ---
    function drawBackground() {
      ctx.fillStyle = "#87ceeb";
      ctx.fillRect(0,0,canvas.width,canvas.height);
      // Sol
      ctx.fillStyle = "#ffe066";
      ctx.beginPath();
      ctx.arc(280, 40, 24, 0, Math.PI*2);
      ctx.fill();
      // Nubes
      ctx.fillStyle = "#fff";
      ctx.fillRect(40, 30, 40, 16);
      ctx.fillRect(90, 20, 32, 12);
      ctx.fillRect(200, 50, 36, 14);
    }

    // --- CORAZ√ìN PIXELART GRANDE ---
    function drawBigHeart(x, y, scale=3, alpha=1) {
      ctx.save();
      ctx.globalAlpha = alpha;
      ctx.translate(x, y);
      ctx.scale(scale, scale);
      ctx.fillStyle = "#e63946";
      ctx.fillRect(2,4,4,4);
      ctx.fillRect(0,8,4,4);
      ctx.fillRect(2,12,4,4);
      ctx.fillRect(10,4,4,4);
      ctx.fillRect(12,8,4,4);
      ctx.fillRect(10,12,4,4);
      ctx.fillRect(4,2,8,4);
      ctx.fillRect(4,6,8,10);
      ctx.restore();
    }

    // --- ANIMACI√ìN PRINCIPAL ---
    function update() {
      drawBackground();

      // --- Dibujar personajes ---
      ctx.drawImage(sprites.ella, personajeElla.x, personajeElla.y, personajeElla.width, personajeElla.height);
      ctx.drawImage(sprites.yo, personajeYo.x, personajeYo.y, personajeYo.width, personajeYo.height);

      // --- Animaci√≥n de caminar ---
      if (animacion === "caminando") {
        if (personajeElla.x < personajeElla.destino) personajeElla.x += personajeElla.speed;
        if (personajeYo.x > personajeYo.destino) personajeYo.x -= personajeYo.speed;
        if (personajeElla.x >= personajeElla.destino && personajeYo.x <= personajeYo.destino) {
          animacion = "beso";
          setTimeout(() => {
            corazonGrande = true;
            corazonAlpha = 0;
            animacion = "corazon";
          }, 500);
        }
      }

      // --- Animaci√≥n del coraz√≥n ---
      if (animacion === "corazon" && corazonGrande) {
        corazonAlpha += 0.05;
        drawBigHeart(canvas.width/2, personajeElla.y-10, 4, corazonAlpha);
        if (corazonAlpha >= 1) {
          setTimeout(() => {
            animacion = "mensaje";
            mostrarMensaje();
          }, 700);
          corazonGrande = false;
        }
      }

      // --- Mostrar mensaje ---
      if (animacion === "mensaje" && mensajeMostrado) {
        // El mensaje ya est√° visible
      }

      requestAnimationFrame(update);
    }

    // --- Mostrar mensaje ---
    function mostrarMensaje() {
      mensajeActual = mensajes[Math.floor(Math.random()*mensajes.length)];
      const mensajeDiv = document.getElementById("mensaje");
      mensajeDiv.innerText = mensajeActual;
      mensajeDiv.style.display = "block";
      mensajeMostrado = true;
      setTimeout(() => {
        mensajeDiv.style.display = "none";
        mensajeMostrado = false;
        resetAnimacion();
      }, 3000);
    }

    // --- Bot√≥n de mensaje ---
    document.getElementById("btnMensaje").onclick = () => {
      if (animacion === "idle") {
        animacion = "caminando";
        personajeElla.x = 10;
        personajeYo.x = 278;
        corazonGrande = false;
        corazonAlpha = 0;
        mensajeMostrado = false;
        document.getElementById("mensaje").style.display = "none";
      }
    };

    // --- Resetear animaci√≥n ---
    function resetAnimacion() {
      animacion = "idle";
      personajeElla.x = 10;
      personajeYo.x = 278;
      corazonGrande = false;
      corazonAlpha = 0;
      mensajeMostrado = false;
    }

    // --- INICIAR ---
    update();
  </script>
</body>
</html>