<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pa' ti mi cachetona ðŸ’– - Pixel Lover</title>

  <!-- Fuente retro -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1: #0f1724;
      --accent: #ff6fa3;
      --card: #1b2330;
      --soft: #ffeef6;
      --pixel-size: 2px; /* para detalles pixel */
    }

    /* reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    body{
      font-family: "Press Start 2P", monospace;
      background: radial-gradient(circle at 10% 10%, #1b2433 0%, #0f1724 40%), linear-gradient(180deg,#071018, #0f1724);
      color: #f6f6f6;
      -webkit-font-smoothing:antialiased;
      overflow:hidden;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:12px;
    }

    /* Contenedor principal (se adapta a mÃ³vil) */
    .app {
      width: 100%;
      max-width: 520px;
      height: 92vh;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius: 14px;
      border: 3px solid rgba(255,111,153,0.12);
      position:relative;
      overflow:hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    /* Intro overlay */
    .intro {
      position:absolute;
      inset:0;
      background: linear-gradient(135deg,#ff9ab8, #ff6fa3);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:999;
      flex-direction:column;
      gap:14px;
      animation: introStay 2.2s ease forwards;
    }
    .intro h1{
      font-size:18px;
      color:white;
      letter-spacing:1px;
      text-align:center;
      transform:scale(0.8);
      animation: popIntro 1.6s cubic-bezier(.2,.9,.3,1);
    }
    @keyframes popIntro{
      0%{transform:scale(0.7); opacity:0}
      50%{transform:scale(1.05); opacity:1}
      100%{transform:scale(1); opacity:1}
    }
    @keyframes introStay{
      0%{opacity:1}
      70%{opacity:1}
      100%{opacity:0; visibility:hidden}
    }

    /* Top bar (title) */
    .topbar{
      width:100%;
      padding:12px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      z-index:5;
    }
    .title{
      color:var(--soft);
      font-size:10px;
      text-shadow:0 3px 12px rgba(0,0,0,0.6);
    }

    /* Scene: area donde corren los sprites */
    .scene{
      flex:1;
      width:100%;
      position:relative;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      padding-bottom:18%;
      overflow:hidden;
      -webkit-user-select:none;
    }

    /* ground pixel line */
    .ground{
      position:absolute;
      left:0;
      right:0;
      bottom:8%;
      height:8px;
      background: repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0 2px, rgba(0,0,0,0.02) 2px 4px);
      filter:brightness(.9);
      z-index:2;
    }

    /* sprites */
    .sprite{
      position:absolute;
      bottom: calc(8% + 8px); /* encima del ground */
      width: 94px;              /* tamaÃ±o en mÃ³viles, se ve chido */
      image-rendering: pixelated;
      z-index:4;
      will-change:transform, left, right;
    }

    /* puntos iniciales fuera de pantalla */
    .sprite.left { left: -140px; transform: translateX(0); }
    .sprite.right{ right: -140px; transform: translateX(0); }

    /* animaciÃ³n "correr" hacia el centro; tiempo calculado para que quede natural */
    .run-left  { animation: runLeft 2.1s linear forwards; }
    .run-right { animation: runRight 2.1s linear forwards; }

    @keyframes runLeft {
      0%   { left:-140px; transform:translateX(0); }
      70%  { left:48%; transform:translateX(-52%); } /* se juntan al centro */
      100% { left:44%; transform:translateX(-50%); } /* ajuste final */
    }
    @keyframes runRight {
      0%   { right:-140px; transform:translateX(0); }
      70%  { right:48%; transform:translateX(52%); }
      100% { right:44%; transform:translateX(50%); }
    }

    /* hug state: intercambiamos opacidades o mostramos hug sprite */
    .hug-sprite{
      position:absolute;
      bottom: calc(8% + 8px);
      left:50%;
      transform:translateX(-50%);
      width:120px;
      z-index:5;
      opacity:0;
      transition:opacity .3s ease;
      image-rendering: pixelated;
    }
    .hug-sprite.show { opacity:1; }

    /* corazÃ³n pixel grande cuando se abrazan */
    .big-heart{
      position:absolute;
      left:50%;
      top:22%;
      transform:translateX(-50%) scale(0.6);
      font-size:46px;
      z-index:6;
      opacity:0;
      filter:drop-shadow(0 6px 12px rgba(255,110,150,0.35));
      animation: heartPop 0.9s ease forwards;
      animation-delay:2.2s;
    }
    @keyframes heartPop {
      0% { opacity:0; transform:translateX(-50%) scale(0.6) translateY(10px); }
      60%{ opacity:1; transform:translateX(-50%) scale(1.15) translateY(-6px); }
      100%{ opacity:1; transform:translateX(-50%) scale(1) translateY(0); }
    }

    /* bottom card: mensajes y controles */
    .card {
      width:94%;
      max-width:480px;
      background:linear-gradient(180deg, rgba(0,0,0,0.24), rgba(255,255,255,0.02));
      border-radius:10px;
      padding:10px;
      margin:12px;
      display:flex;
      gap:8px;
      flex-direction:column;
      align-items:center;
      z-index:7;
      box-shadow: inset 0 -3px 0 rgba(255,255,255,0.02);
    }
    .messageBox{
      width:100%;
      min-height:72px;
      background:rgba(0,0,0,0.4);
      border:2px solid rgba(255,111,163,0.06);
      border-radius:8px;
      padding:10px;
      color:#ffdfe9;
      font-size:11px;
      line-height:1.2;
      word-wrap:break-word;
      text-align:center;
      white-space:pre-wrap;
    }

    .controls{
      width:100%;
      display:flex;
      gap:8px;
      justify-content:center;
      margin-top:6px;
    }

    .btn {
      background:linear-gradient(180deg,var(--accent), #ff4d81);
      border:none;
      padding:10px 12px;
      border-radius:8px;
      color:#fff;
      font-size:11px;
      cursor:pointer;
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    }
    .btn:active{ transform:translateY(1px) }

    /* particle effects (pixel hearts/flowers) */
    .particle{
      position:absolute;
      width:18px;
      height:18px;
      z-index:8;
      pointer-events:none;
      image-rendering:pixelated;
      will-change:transform, opacity;
      animation: floatUpParticle 1.6s ease forwards;
    }
    @keyframes floatUpParticle{
      0% { transform:translateY(0) scale(0.9); opacity:1; }
      100%{ transform:translateY(-160px) scale(1.4); opacity:0; }
    }

    /* responsive tweaks */
    @media (min-width:420px){
      .sprite{ width:120px }
      .hug-sprite{ width:150px }
      .big-heart{ font-size:72px }
      .messageBox{ font-size:12px }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Intro aparece y se oculta; el texto top es en tono coloquial -->
    <div class="intro" id="intro">
      <h1>pa' ti mi cachetona ðŸ’–</h1>
      <div style="font-size:10px; color:rgba(255,255,255,0.9)">un regalo pixel para mi amor</div>
    </div>

    <div class="topbar">
      <div class="title">Pa' ti â€¢ Pixel Lover</div>
      <div style="font-size:9px; color:rgba(255,255,255,0.6)">â™¥ retro Â· mobile friendly</div>
    </div>

    <!-- Scene donde pasan los sprites -->
    <div class="scene" id="scene">
      <div class="ground"></div>

      <!-- sprites: reemplazar src por sus imÃ¡genes en images/ -->
      <img id="boy" src="images/boy.png" class="sprite left" alt="Ã‰l">
      <img id="girl" src="images/girl.png" class="sprite right" alt="Ella">

      <!-- Opcional: sprite del abrazo (si lo tiene) -->
      <img id="hugSprite" src="images/hug.png" class="hug-sprite" alt="Abrazados">

      <!-- gran corazÃ³n pixel cuando se juntan -->
      <div id="bigHeart" class="big-heart">ðŸ’–</div>
    </div>

    <!-- bottom ui -->
    <div class="card">
      <div id="messageBox" class="messageBox">Presione "Sacar mensajito" para ver algo lindo âœ¨</div>

      <div class="controls">
        <button id="msgBtn" class="btn">Sacar mensajito</button>
        <button id="replayBtn" class="btn">Jugar intro</button>
      </div>
    </div>
  </div>

  <script>
    /**********************
     * CONFIGURACIÃ“N
     **********************/
    // Mensajes (usted irÃ¡ agregando sus 62+ lÃ­neas aquÃ­)
    const messages = [
      "Desde que llegaste, mi mundo se pixeleÃ³ de colores ðŸ’•",
      "Te mando un abrazo en 8-bits que espera el real ðŸ¤—",
      // agregue mÃ¡s lÃ­neas...
    ];

    // Referencias DOM
    const boy = document.getElementById('boy');
    const girl = document.getElementById('girl');
    const hugSprite = document.getElementById('hugSprite');
    const bigHeart = document.getElementById('bigHeart');
    const msgBox = document.getElementById('messageBox');
    const msgBtn = document.getElementById('msgBtn');
    const replayBtn = document.getElementById('replayBtn');
    const scene = document.getElementById('scene');

    /**********************
     * LOGICA DE INTRO + CORRIDA Y ABRAZO
     **********************/
    function startRunSequence() {
      // ocultar hug, reset particle/heart
      hugSprite.classList.remove('show');
      bigHeart.style.opacity = 0;

      // reset posiciones (en caso de replay)
      boy.classList.remove('run-left');
      girl.classList.remove('run-right');

      // force reflow to restart CSS animation
      void boy.offsetWidth;
      void girl.offsetWidth;

      // iniciar corrida
      boy.classList.add('run-left');
      girl.classList.add('run-right');

      // cuando termine la animaciÃ³n (2.1s) mostramos abrazo
      setTimeout(() => {
        // si tiene sprite de abrazo, muÃ©strelo
        if (hugSprite && hugSprite.getAttribute('src')) {
          hugSprite.classList.add('show');
          // ocultar los dos sprites
          boy.style.opacity = 0;
          girl.style.opacity = 0;
        } else {
          // si no, mantenga los sprites y simplemente escale un poco para simular abrazo
          boy.style.transform = "translateX(0) scale(0.96)";
          girl.style.transform = "translateX(0) scale(0.96)";
        }

        // mostrar corazÃ³n grande
        bigHeart.style.opacity = 1;
        // lanzar unas partÃ­culas pixeladas por el abrazo
        spawnParticles(14);
      }, 2100);
    }

    // ejecuta intro (oculta overlay y lanza run)
    function runIntro() {
      const intro = document.getElementById('intro');
      // aseguramos que overlay estÃ© visible primero
      intro.style.opacity = 1;
      intro.style.visibility = 'visible';
      // pequeÃ±o timeout para dejar ver el texto, despuÃ©s se oculta con la animaciÃ³n CSS
      setTimeout(()=> {
        // comenzamos la corrida justo cuando el overlay desaparece (coincide con CSS: 2.2s)
        startRunSequence();
      }, 800); // 800ms para sensaciÃ³n; la animaciÃ³n CSS del intro se encarga del fadeOut
    }

    // arrancar una vez cargue la pÃ¡gina (pero espere 200ms para evitar flicker)
    window.addEventListener('load', ()=> {
      setTimeout(runIntro, 150);
    });

    /**********************
     * Mensajes y efectos
     **********************/
    function getRandomMessage() {
      if (messages.length === 0) return "Te pienso a cada rato ðŸ’­";
      return messages[Math.floor(Math.random()*messages.length)];
    }

    function spawnParticles(count=8) {
      for (let i=0;i<count;i++){
        const p = document.createElement('img');
        p.className = 'particle';
        // intente usar imagen local heart si existe, sino usa emoji background via canvas fallback
        // si usted tiene heart.png en images/, el cÃ³digo lo usarÃ¡; si no, usarÃ¡ un emoji en base64 tiny fallback
        const heartPath = 'images/heart.png';
        // comprobamos rÃ¡pidamente si existe (no bloquea si no existe)
        p.src = heartPath;
        p.style.left = (20 + Math.random()*70) + '%';
        p.style.bottom = (12 + Math.random()*10) + '%';
        // si la imagen falla en cargar, al fallback la reemplazamos por texto dentro de un div
        p.onerror = function(){ 
          const div = document.createElement('div');
          div.className = 'particle';
          div.style.left = p.style.left;
          div.style.bottom = p.style.bottom;
          div.style.fontSize = '14px';
          div.style.color = '#ffb3d0';
          div.innerText = Math.random()>0.5 ? 'ðŸ’–' : 'ðŸŒ¸';
          scene.appendChild(div);
          setTimeout(()=> div.remove(), 1600);
          p.remove();
        };
        scene.appendChild(p);
        // remover luego de la animaciÃ³n
        setTimeout(()=> { try{ p.remove() }catch(e){} }, 1700);
      }
    }

    // mostrar mensaje (y efectos)
    function showMessage() {
      const msg = getRandomMessage();
      msgBox.innerText = msg;
      spawnParticles(10);
    }

    // botones
    msgBtn.addEventListener('click', showMessage);
    replayBtn.addEventListener('click', ()=> {
      // reset opacities
      boy.style.opacity = 1;
      girl.style.opacity = 1;
      hugSprite.classList.remove('show');
      bigHeart.style.opacity = 0;
      startRunSequence();
    });

    // opcional: lanzar pequeÃ±as flores siempre de fondo (estilo pixel)
    setInterval(()=> {
      const f = document.createElement('div');
      f.className = 'particle';
      f.style.width = '12px';
      f.style.height = '12px';
      f.style.left = (Math.random()*90)+'%';
      f.style.bottom = '6%';
      f.style.fontSize = '12px';
      f.style.lineHeight = '12px';
      f.style.opacity = '0.85';
      f.style.transform = 'translateY(0)';
      f.innerText = Math.random()>0.6 ? 'ðŸŒ¸' : 'ðŸŒ¿';
      document.getElementById('scene').appendChild(f);
      setTimeout(()=> f.remove(), 1600);
    }, 700);

  </script>
</body>
</html>
